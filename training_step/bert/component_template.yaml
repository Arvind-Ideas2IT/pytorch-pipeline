name: train_pytorch_cnn
description: Train PyTorch ImageNet CNN

inputs:
    - {name: TrainingData, type: String, description: 'Path to the training data'}
    - {name: MaxEpochs, type: Integer, description: 'Path to the training data'}
    - {name: NumSamples, type: Integer, description: 'Path to the training data'}
    - {name: BatchSize, type: Integer, description: 'Path to the training data'}
    - {name: NumWorkers, type: Integer, description: 'Path to the training data'}
    - {name: LearningRate, type: Float, description: 'Path to the training data'}
    - {name: Accelerator, type: String, description: 'Path to the training data'}

outputs:
    - {name: ModelCheckpoint, type: String, description: "Path for the resulting model checkpoint"}
    - {name: TensorboardLogs, type: TBlogs, description: "Path for the tensorboard logs"}

implementation:
    container:
        image: __IMAGE_NAME__
        command: ["python","/component/entry_point.py"]
        args: [
            --train_glob, {inputPath: TrainingData},
            --model_save_path, {outputPath: ModelCheckpoint},
            --tensorboard_root, {outputPath: TensorboardLogs},
            --max_epochs, {inputValue: MaxEpochs},
            --num_samples, {inputValue: NumSamples},
            --batch_size, {inputValue: BatchSize},
            --num_workers, {inputValue: NumWorkers},
            --learning_rate, {inputValue: LearningRate},
            --accelerator, {inputValue: Accelerator}
        ]
